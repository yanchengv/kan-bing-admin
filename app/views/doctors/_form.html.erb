<%#= stylesheet_link_tag    'form-select'%>
<%#= javascript_include_tag 'doctor-form'%>
<style>
    .select2-container{
        width:200px;

    }
    .form-control{
        width :200px;
    }
    .error_remind{
        border:#ff0000 1px solid
    }
</style>
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
  <h4 class="modal-title"><b>创建或编辑医生</b></h4>
</div>
<div class="modal-body">
<%= form_for(@doctor,remote:true,html:{id:'doc_form'}) do |f| %>
    <% if @doctor.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@doctor.errors.count, "error") %> prohibited this doctor from being saved:</h2>

          <ul>
            <% @doctor.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label '姓名' %><span style="color:red"><b>*</b></span>
        <%= f.text_field :name ,class:"form-control",onblur:"check_name(this.value,'true')" %>
      </div>
      <div class="col-md-6 field">
        <%= f.label :性别 %>
        <div id="doc_gender"><%= render partial: 'doctors/gender_partial' %></div>
        <%#= f.text_field :gender ,class:"form-control"%>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label '证件类型' %><br>
        <select id="doctor_credential_type" name="doctor[credential_type]" onchange="change_type()">
          <option value="">---请选择---</option>
          <option id='居民身份证' value="居民身份证">居民身份证</option>
          <option id='军官证' value="军官证">军官证</option>
          <option id='护照' value="护照">护照</option>
          <option id='武警警官证' value="武警警官证">武警警官证</option>
          <option id='士兵证' value="士兵证">士兵证</option>
          <option id='港澳同胞回乡证' value="港澳同胞回乡证">港澳同胞回乡证</option>
          <option id='外国人居留证' value="外国人居留证">外国人居留证</option>
          <option id='外国人出入境证' value="外国人出入境证">外国人出入境证</option>
          <option id='其它' value="其它">其它</option>
        </select>
        <%#= f.text_field :credential_type ,class:"form-control"%>
      </div>
      <div class="col-md-6 field">
        <%= f.label '证件号码' %>
        <%= f.text_field :credential_type_number,class:"form-control",onblur:"check_credential_type_number(this.value,'true')" %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label :生日 %><span style="color:red"><b>*</b></span>
        <input id='doc_birthday' data-format="yyyy-MM-dd" name='doctor[birthday]' type="text" class="form-control" onblur="check_birthday(this.value,'true')"/>
        <%#= f.date_select :birthday %>
      </div>
      <!--<div class="col-md-6 field">-->
      <%#= f.label :出生地 %>
      <%#= f.text_field :birthplace,class:"form-control" %>
      <!--</div>-->
      <div class="col-md-6 field">
        <%= f.label :婚姻情况 %><br>
        <select id="doctor_marriage" name="doctor[marriage]" >
          <option value="">---请选择---</option>
          <option id='未婚' value="未婚">未婚</option>
          <option id='已婚' value="已婚">已婚</option>
          <option id='离异' value="离异">离异</option>
          <option id='丧偶' value="丧偶">丧偶</option>
          <option id='保密' value="保密">保密</option>
        </select>
        <%#= f.text_field :marriage,class:"form-control" %>
      </div>
    </div>
    <!--<div class="row">-->
      <!--<div class="col-md-6 field">-->
        <!--<%#= f.label :选择省 %>-->
        <!--<div id="doc_province"><%#= render partial: 'doctors/province_partial' %></div>-->
        <!--<%#= f.text_field :province_id %>-->
      <!--</div>-->
      <!--<div class="col-md-6 field">-->
        <!--<%#= f.label :选择市 %>-->
        <!--<div id="doc_city"><%#= render partial: 'doctors/city_partial' %></div>-->
        <!--<%#= f.number_field :city_id %>-->
      <!--</div>-->
      <!--<div class="col-md-6 field">-->
      <%#= f.label :省名称 %>
      <%#= f.text_field :province_name,class:"form-control" %>
      <!--</div>-->
    <!--</div>-->
    <!--<div class="row">-->
    <!--<div class="col-md-6 field">-->
    <%#= f.label :选择市 %>
    <!--<div id="doc_city"><%#= render partial: 'doctors/city_partial' %></div>-->
    <%#= f.number_field :city_id %>
    <!--</div>-->
    <!--<div class="col-md-6 field">-->
    <%#= f.label :市名称 %>
    <%#= f.text_field :city_name ,class:"form-control"%>
    <!--</div>-->
    <!--</div>-->
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label :选择医院 %>
        <div id="doc_hospital"><%= render partial: 'doctors/hospital_partial' %></div>
      </div>
      <!--<div class="col-md-6 field">-->
      <%#= f.label :医院名称 %>
      <%#= f.text_field :hospital_name ,class:"form-control"%>
      <!--</div>-->
      <div class="col-md-6 field">
        <%= f.label :选择科室 %>
        <div id="doc_department"><%= render partial: 'doctors/department_partial' %></div>
      </div>
    </div>
    <!--<div class="row">-->
    <!--<div class="col-md-6 field">-->
    <%#= f.label :选择科室 %>
    <!--<div id="doc_department"><%#= render partial: 'doctors/department_partial' %></div>-->
    <!--</div>-->
    <!--<div class="col-md-6 field">-->
    <%#= f.label :科室名称 %>
    <%#= f.text_field :department_name,class:"form-control" %>
    <!--</div>-->
    <!--</div>-->
    <!--<div class="row">-->
    <!--<div class="col-md-6 field">-->
    <!--<%#= f.label :地址 %>-->
    <!--<%#= f.text_field :address ,class:"form-control"%>-->
    <!--</div>-->
    <!--<div class="col-md-6 field">-->
    <%#= f.label :婚姻情况 %><br>
    <!--<select id="doctor_marriage" name="doctor[marriage]" >-->
    <!--<option value="">---请选择---</option>-->
    <!--<option id='未婚' value="未婚">未婚</option>-->
    <!--<option id='已婚' value="已婚">已婚</option>-->
    <!--<option id='离异' value="离异">离异</option>-->
    <!--<option id='丧偶' value="丧偶">丧偶</option>-->
    <!--<option id='保密' value="保密">保密</option>-->
    <!--</select>-->
    <!--<%#= f.text_field :marriage,class:"form-control" %>-->
    <!--</div>-->
    <!--</div>-->
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label :国籍 %><br>
        <select id="doctor_citizenship" name="doctor[citizenship]" onchange="get_nationality()" >
          <option value="">---请选择---</option>
          <% @citizenships = NationalInformation.where(parent_id:nil) %>
          <% if !@citizenships.empty? %>
              <% @citizenships.each do |citizenship| %>
                  <option id="<%= citizenship.name %>" value="<%= citizenship.name %>"><%= citizenship.name %></option>
              <% end %>
          <% end %>
        </select>
        <%#= f.text_field :citizenship,class:"form-control" %>
      </div>
      <div class="col-md-6 field">
        <%= f.label :民族 %><br>
        <select id="doctor_nationality" name="doctor[nationality]" >
          <option value="">---请选择---</option>
        </select>
        <%#= f.text_field :nationality,class:"form-control" %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label :电子邮箱 %>　<span style="color:blue"><b>*</b></span><br>
        <%= f.text_field :email,class:"form-control",onblur:"check_email(this.value,'true')" %>
      </div>
      <div class="col-md-6 field">
        <%= f.label :手机号 %>　<span style="color:blue"><b>*</b></span><br>
        <%= f.text_field :mobile_phone,class:"form-control",onblur:"check_phone(this.value,'true')"  %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label :职位 %><br>
        <select id="doctor_position" name="doctor[position]" >
          <option value="">---请选择---</option>
          <option id="教授" value="教授">教授</option>
          <option id="副教授" value="副教授">副教授</option>
          <option id="科主任" value="科主任">科主任</option>
          <option id="副科主任" value="副科主任">副科主任</option>
        </select>
        <%#= f.text_field :position,class:"form-control" %>
      </div>
      <div class="col-md-6 field">
        <%= f.label :专业职称 %><br>
        <select id="doctor_professional_title" name="doctor[professional_title]" >
          <option value="">---请选择---</option>
          <option id="主治医师" value="主治医师">主治医师</option>
          <option id="主任医师" value="主任医师">主任医师</option>
          <option id="副主任医师" value="副主任医师">副主任医师</option>
          <option id="主任技师" value="主任技师">主任技师</option>
          <option id="副主任技师" value="副主任技师">副主任技师</option>
          <option id="特聘高年资医师" value="特聘高年资医师">特聘高年资医师</option>
        </select>
        <%#= f.text_field :professional_title,class:"form-control" %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label :专长 %><br>
        <%= f.text_field :expertise,class:"form-control" %>
      </div>
      <div class="col-md-6 field">
        <%= f.label :学历 %><br>
        <select id="doctor_degree" name="doctor[degree]" >
          <!--<option value="">---请选择---</option>-->
          <option id='博士及以上' value="博士及以上">博士及以上</option>
          <option id='研究生' value="研究生">研究生</option>
          <option id='本科' value="本科">本科</option>
          <option id='大专或职高' value="大专或职高">大专或职高</option>
          <option id='高中或中专' value="高中或中专">高中或中专</option>
          <option id='初中' value="初中">初中</option>
          <option id='小学及以下' value="小学及以下">小学及以下</option>
        </select>
        <%#= f.text_field :degree,class:"form-control" %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 field">
        <%= f.label :毕业学校 %><br>
        <%= f.text_field :graduated_from,class:"form-control" %>
      </div>
      <div class="col-md-6 field">
        <%= f.label :毕业时间 %><br>
        <input id='doc_graduated_at' data-format="yyyy-MM-dd" name='doctor[graduated_at]' type="text" class="form-control"/>
      </div>
    </div>
    <!--
   <div class="row">
    <div class="col-md-6 field">
      <%#= f.label :家庭电话 %><br>
      <%#= f.text_field :home_phone,class:"form-control" %>
    </div>
    <div class="col-md-6 field">
      <%#= f.label :家庭地址 %><br>
      <%#= f.text_field :home_address,class:"form-control" %>
    </div>
   </div>
   <div class="row">
    <div class="col-md-6 field">
      <%#= f.label :联系人 %><br>
      <%#= f.text_field :contact,class:"form-control" %>
    </div>
    <div class="col-md-6 field">
      <%#= f.label :联系电话 %><br>
      <%#= f.text_field :contact_phone,class:"form-control" %>
    </div>
   </div>
   <div class="row">
    <div class="col-md-6 field">
      <%#= f.label :家庭邮编 %><br>
      <%#= f.text_field :home_postcode,class:"form-control" %>
    </div>
    <div class="col-md-6 field">
      <%#= f.label :照片 %>
      <%#= f.text_field :photo,class:"form-control" %>
    </div>
   </div>
   <div class="row">
    <div class="col-md-6 field">
      <%#= f.label :说明 %><br>
      <%#= f.text_field :introduction,class:"form-control" %>
    </div>
    <div class="col-md-6 field">
      <%#= f.label :雇佣日期 %><br>
      <input id='doc_hire_date' data-format="yyyy-MM-dd" name='doctor[hire_date]' type="text" class="form-control"/>
    </div>
   </div>
   <div class="row">
    <div class="col-md-6 field">
      <%#= f.label :证书号码 %><br>
      <%#= f.text_field :certificate_number,class:"form-control" %>
    </div>
    <div class="col-md-6 field">
      <%#= f.label :论文 %><br>
      <%#= f.text_field :research_paper,class:"form-control" %>
    </div>
   </div>
   <div class="row">
    <div class="col-md-6 field">
      <%#= f.label :微信 %><br>
      <%#= f.text_field :wechat,class:"form-control" %>
    </div>
    <div class="col-md-6 field">
      <%#= f.label :奖励 %><br>
      <%#= f.text_field :rewards,class:"form-control" %>
    </div>
   </div>
  -->
    <div class="actions" style="display:none;">
      <%= f.submit id:'new_or_edit_doctor'%>
    </div>

    </div>
    <div class="modal-footer">
      <div style="font-size: 14px;margin-top: -20px;margin-bottom: 10px;">注:表单中带<span style="color:red;"><b>*</b></span>的为必填项,手机号和电子邮箱至少填写一个.</div>
      <%= f.submit '确定',id:'new_or_edit_submit',class:"btn btn-primary"%>
      <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
<% end %>
</div>
</div>
</div>
<script>
    var credential_type_number_flag=true
    var phone_flag=false
    var name_flag=false
    var email_flag=false
    var birthday_flag=false
    var two_blank=true
    function check_credential_type_number(value){
       if ($('#doctor_credential_type').val()=='居民身份证') {
           var reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
           if (reg.test(value) === false) {
               alert('生份证号格式错误!')
               credential_type_number_flag = false
               $('#doctor_credential_type_number').addClass('error_remind')
           } else {
               $.ajax({
                   type:'get',
                   url:'/doctors/check_credential_type_number?doctor_id=<%=@doctor.id unless @doctor.nil?%>',
                   data:{credential_type_number:value},
                   success:function(data){
                       var is_use;
                       is_use= data['success'];
                       if(is_use==true) {
                           credential_type_number_flag=true;
                           showBirthday(value)
                           $('#doctor_credential_type_number').removeClass('error_remind')
                       }else{
                           credential_type_number_flag=false;
                           $('#doctor_credential_type_number').addClass('error_remind')
                           alert('身份证号码重复!')
                       }
                   }
               })
           }
       }
    }
    function check_phone(phone,a){
        var c_phone=/1[3|5|7|8|][0-9]{9}/;
        var re_phone= new RegExp(c_phone);
        if (phone!=''){
            if (re_phone.test(phone) && phone.length==11){
                $.ajax({
                    type:'get',
                    url:'/doctors/check_phone?doctor_id=<%=@doctor.id unless @doctor.nil?%>',
                    data:{phone:phone},
                    success:function(data){
                        if(data['success']) {
                            phone_flag=true;
                            $('#doctor_mobile_phone').removeClass('error_remind')
                        }else{
                            phone_flag=false;
                            $('#doctor_mobile_phone').addClass('error_remind')
                            if (a=='true') {
                                alert('手机号重复!')
                            }
                        }
                    }
                })
            }else{
                phone_flag=false;
                $('#doctor_mobile_phone').addClass('error_remind')
                if (a=='true') {
                    alert('手机号格式不正确!')
                }
            };
        }else{
            phone_flag=true;
            $('#doctor_mobile_phone').removeClass('error_remind')
        }
    }
    function check_name(name,a){
        var c_name=/^\s*$/g;
        var re_name=new RegExp(/^\s*$/g)
        if (re_name.test(name)){
            name_flag=false;
            $('#doctor_name').addClass('error_remind')
            if (a=='true'){
                alert('姓名不能为空!')
            }
        }else{
            name_flag=true;
            $('#doctor_name').removeClass('error_remind')

        };
    };
    function check_email(email,a) {
        var c_email=/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
        var re_email = new RegExp(c_email);
        if (email!=''){
            if(re_email.test(email)){
                $.ajax({
                    type:'get',
                    url:'/doctors/check_email?doctor_id=<%=@doctor.id unless @doctor.nil?%>',
                    data:{email:email},
                    success:function(data){
                        var is_use;
                        is_use= data['success'];
                        if(is_use==true) {
                            email_flag=true;
                            $('#doctor_email').removeClass('error_remind')
                        }else{
                            email_flag=false;
                            $('#doctor_email').addClass('error_remind')
                            if (a=='true') {
                                alert('邮箱已注册!')
                            }
                        }

                    }
                })

            }
            else  {
                email_flag=false;
                $('#doctor_email').addClass('error_remind')
                if (a=='true') {
                    alert('邮箱格式不正确')
                }

            } ;
        }else{
            email_flag=true;
            $('#doctor_email').removeClass('error_remind')
        }

    };

    function check_birthday(birthday,a){
        if($.trim(birthday)==''){
            $('#doc_birthday').addClass('error_remind')
            if (a=='true'){
                alert('生日不可为空!')
            }
        }else{
            birthday_flag=true
            $('#doc_birthday').removeClass('error_remind')
        }
    }

    function change_type(){
        $('#doctor_credential_type_number').focus();
        $('#doctor_credential_type_number').removeClass('error_remind');
        credential_type_number_flag = true
    }

    function showBirthday(val)
    {
        var birthdayValue;
        if(15==val.length)
        { //15位身份证号码
            birthdayValue = val.charAt(6)+val.charAt(7);
            if(parseInt(birthdayValue)<10)
            {
                birthdayValue = '20'+birthdayValue;
            }
            else
            {
                birthdayValue = '19'+birthdayValue;
            }
            birthdayValue=birthdayValue+'-'+val.charAt(8)+val.charAt(9)+'-'+val.charAt(10)+val.charAt(11);
            if(parseInt(val.charAt(14)/2)*2!=val.charAt(14)) {
                document.getElementById('doctor_gender_2').removeAttribute('checked')
                document.getElementById('doctor_gender_1').setAttribute('checked','checked');
//            document.all.sex.value='男';
            }
            else{
                document.getElementById('doctor_gender_1').removeAttribute('checked')
                document.getElementById('doctor_gender_2').setAttribute('checked','checked');
//            document.all.sex.value='女';
            }
            $('#doc_birthday').val(birthdayValue)
//        document.all.birthday.value=birthdayValue;
        }
        if(18==val.length)
        { //18位身份证号码
            birthdayValue=val.charAt(6)+val.charAt(7)+val.charAt(8)+val.charAt(9)+'-'+val.charAt(10)+val.charAt(11)+'-'+val.charAt(12)+val.charAt(13);
            if(parseInt(val.charAt(16)/2)*2!=val.charAt(16)) {
                document.getElementById('doctor_gender_2').removeAttribute('checked')
                document.getElementById('doctor_gender_1').setAttribute('checked','checked');
            }

            else{
                document.getElementById('doctor_gender_1').removeAttribute('checked')
                document.getElementById('doctor_gender_2').setAttribute('checked','checked');
            }
//            if(val.charAt(17)!=IDCard(val))
//            {
//                document.all.idCard.style.backgroundColor='#ffc8c8';
//            }
//            else
//            {
//                document.all.idCard.style.backgroundColor='white';
//            }
//        document.all.birthday.value=birthdayValue;
            $('#doc_birthday').val(birthdayValue)
        }
    }
    function get_nationality(){
        $.ajax({
            type:'get',
            url:'/national_informations/get_nationality?nation_id='+$('#doctor_citizenship').val(),
            success:function(data){
               $('#doctor_nationality').html(data)
            }
        })
    }
    function create_or_update(){
//      var result = $('#new_or_edit_doctor').click()
//      console.log(result)
//      $('#create_or_edit_form').modal('hide')
//      var url= "/doctors?menu_id=<%=@menu_id%>"
//      jQuery("#list12").jqGrid('setGridParam',{url:url}).trigger("reloadGrid");
        var data = $('#doc_form').serialize()
        <% if !params[:id].nil? %>
        $.ajax({
            type:'put',
            url:'/doctors/<%= params[:id] %>',
            data:data,
            success:function(data){
                if (data['success']){
                    $('#create_or_edit_form').modal('hide')
                    var url= "/doctors/show_index?menu_id=<%=@menu_id%>&hos_id=" + $('#doctor_hos_id').val()
                    jQuery("#list12").jqGrid('setGridParam',{url:url}).trigger("reloadGrid");
                }else{
                    alert('失败!')
                }

            }
        }) ;
        <% else %>
        $.ajax({
            type:'post',
            url:'/doctors',
            data:data,
            success:function(data){
//                alert(data['success'])
                if (data['success']){
                    $('#create_or_edit_form').modal('hide')
                    var url= "/doctors/show_index?menu_id=<%=@menu_id%>&hos_id=" + $('#doctor_hos_id').val()
                    jQuery("#list12").jqGrid('setGridParam',{url:url}).trigger("reloadGrid");
                }else{
                    alert('失败!')
                }

            }
        }) ;
        <% end %>
    }
    $(function() {
        $(":submit[id=new_or_edit_submit]").click(function(check){
            var birthday = $('#doc_birthday').val()
            var phone = $('#doctor_mobile_phone').val()
            var email = $('#doctor_email').val()
            var name = $('#doctor_name').val()
//            check_phone(phone)
            check_name(name)
//            check_email(email)
            check_birthday(birthday)
            if (phone=='' && email==''){
                two_blank = false
            }else{
                two_blank = true
            }
            if(two_blank==false||credential_type_number_flag!=true||name_flag!=true||email_flag==false||phone_flag==false||credential_type_number_flag==false||birthday_flag==false){
                alert("表单填写有误，不能提交表单！");
                check.preventDefault();//此处阻止提交表单
            }else{
                create_or_update()
            }
        });
        $('#doc_graduated_at').datetimepicker({
            lang:'ch',
            timepicker:false,
            format:'Y-m-d'
        });
        $('#doc_hire_date').datetimepicker({
            lang:'ch',
            timepicker:false,
            format:'Y-m-d'
        });
        $('#doctor_credential_type').select2();
        $('#doctor_marriage').select2()
        $('#doctor_degree').select2()
        $('#doctor_nationality').select2();
        $('#doctor_citizenship').select2();
        $('#doctor_position').select2();
        $('#doctor_professional_title').select2();
        $('#doc_birthday').datetimepicker({
            lang:'ch',
            timepicker:false,
            format:'Y-m-d'
        });
        <% if !params[:id].nil? %>
        <% doctor = Doctor.find_by(id:params[:id]) %>
        $('#doc_birthday').val('<%=doctor.birthday%>')
        $('#doc_hire_date').val('<%=doctor.hire_date%>')
        $('#doc_graduated_at').val('<%=doctor.graduated_at%>')
        <% doc = Doctor.find_by(id:params[:id]) %>
        $('#s2id_doctor_credential_type').children('.select2-choice').children('.select2-chosen').html('<%=doc.credential_type%>')
        if (document.getElementById('<%=doc.credential_type%>')){
            document.getElementById('<%=doc.credential_type%>').setAttribute('selected','selected')
        }
        $('#s2id_doctor_marriage').children('.select2-choice').children('.select2-chosen').html('<%=doc.marriage%>')
        if (document.getElementById('<%=doc.marriage%>')!=null) {
            document.getElementById('<%=doc.marriage%>').setAttribute('selected', 'selected')
        }
        $('#s2id_doctor_degree').children('.select2-choice').children('.select2-chosen').html('<%=doc.degree%>')
        if (document.getElementById('<%=doc.degree%>')!=null) {
            document.getElementById('<%=doc.degree%>').setAttribute('selected', 'selected')
        }
        $('#s2id_doctor_nationality').children('.select2-choice').children('.select2-chosen').html('<%=doc.nationality%>')
        if (document.getElementById('<%=doc.nationality%>')!=null) {
            document.getElementById('<%=doc.nationality%>').setAttribute('selected', 'selected')
        }
        $('#s2id_doctor_citizenship').children('.select2-choice').children('.select2-chosen').html('<%=doc.citizenship%>')
        if (document.getElementById('<%=doc.citizenship%>')!=null) {
            document.getElementById('<%=doc.citizenship%>').setAttribute('selected', 'selected')
        }
        $('#s2id_doctor_professional_title').children('.select2-choice').children('.select2-chosen').html('<%=doc.professional_title%>')
        if (document.getElementById('<%=doc.professional_title%>')!=null) {
            document.getElementById('<%=doc.professional_title%>').setAttribute('selected', 'selected')
        }
        $('#s2id_doctor_position').children('.select2-choice').children('.select2-chosen').html('<%=doc.position%>')
        if (document.getElementById('<%=doc.position%>')!=null) {
            document.getElementById('<%=doc.position%>').setAttribute('selected', 'selected')
        }
        <% end %>
        $.ajax({
            type:'get',
            url:'/national_informations/get_nationality?nation_id='+$('#doctor_citizenship').val(),
            success:function(data){
                $('#doctor_nationality').html(data)
            }
        })
    })
</script>
